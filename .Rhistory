theme(axis.text.x = element_text(size=8, angle=45)) +
facet_wrap(~ site)
cons %>%
mutate(site = 'Other') %>%
mutate(site = if_else(str_detect(waitingArea, 'AUH') == TRUE, 'AUH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'BGH') == TRUE, 'BGH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'RLH') == TRUE, 'RLH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'LUH') == TRUE, 'LUH', site)) %>%
subset(site %in% c('AUH', 'BGH', 'LUH', 'RLH', 'Other')) %>%
mutate(site = factor(site, levels = c('AUH', 'BGH', 'LUH', 'RLH', 'Other'))) %>%
ggplot(aes(x=as.Date(`Date`))) +
geom_line(aes(fill=..count..), stat="bin", binwidth = 7) +
scale_x_date(date_breaks = "months", date_labels = "%b") +
geom_vline(xintercept = as.numeric(as.Date(c("2021-01-01", "2022-01-01"))), linetype=4) +
theme(axis.text.x = element_text(size=8, angle=45)) +
facet_wrap(~ site) +
ggtitle("Patient uptake of video consultation during 2020-2022") +
ylab("patient uptake (count per 7 days)") +
xlab("Time (Month)")
cons %>%
mutate(site = 'Other') %>%
mutate(site = if_else(str_detect(waitingArea, 'AUH') == TRUE, 'AUH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'BGH') == TRUE, 'BGH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'RLH') == TRUE, 'RLH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'LUH') == TRUE, 'LUH', site)) %>%
subset(site %in% c('AUH', 'BGH', 'LUH', 'RLH', 'Other')) %>%
mutate(site = factor(site, levels = c('AUH', 'BGH', 'LUH', 'RLH', 'Other'))) %>%
ggplot(aes(x=as.Date(`Date`))) +
geom_line(aes(fill=..count..), stat="bin", binwidth = 7) +
scale_x_date(date_breaks = "months", date_labels = "%b") +
geom_vline(xintercept = as.numeric(as.Date(c("2021-01-01", "2022-01-01"))), linetype=4) +
theme(axis.text.x = element_text(size=8, angle=45)) +
facet_wrap(~ site) +
ggtitle("Patient uptake of video consultation during 2020-2022 per site") +
ylab("patient uptake (count per 7 days)") +
xlab("Time (Month)")
cons %>%
mutate(site = 'Other') %>%
mutate(site = if_else(str_detect(waitingArea, 'AUH') == TRUE, 'AUH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'BGH') == TRUE, 'BGH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'RLH') == TRUE, 'RLH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'LUH') == TRUE, 'LUH', site)) %>%
subset(site %in% c('AUH', 'BGH', 'LUH', 'RLH', 'Other')) %>%
mutate(site = factor(site, levels = c('AUH', 'BGH', 'LUH', 'RLH', 'Other'))) %>%
table(cons$site)
cons %>%
mutate(site = 'Other') %>%
mutate(site = if_else(str_detect(waitingArea, 'AUH') == TRUE, 'AUH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'BGH') == TRUE, 'BGH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'RLH') == TRUE, 'RLH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'LUH') == TRUE, 'LUH', site)) %>%
subset(site %in% c('AUH', 'BGH', 'LUH', 'RLH', 'Other')) %>%
mutate(site = factor(site, levels = c('AUH', 'BGH', 'LUH', 'RLH', 'Other'))) %>%
table(site)
cons %>%
mutate(site = 'Other') %>%
mutate(site = if_else(str_detect(waitingArea, 'AUH') == TRUE, 'AUH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'BGH') == TRUE, 'BGH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'RLH') == TRUE, 'RLH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'LUH') == TRUE, 'LUH', site)) %>%
subset(site %in% c('AUH', 'BGH', 'LUH', 'RLH', 'Other')) %>%
mutate(site = factor(site, levels = c('AUH', 'BGH', 'LUH', 'RLH', 'Other'))) %>%
filter(site == 'AUH')
cons %>%
mutate(site = 'Other') %>%
mutate(site = if_else(str_detect(waitingArea, 'AUH') == TRUE, 'AUH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'BGH') == TRUE, 'BGH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'RLH') == TRUE, 'RLH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'LUH') == TRUE, 'LUH', site)) %>%
subset(site %in% c('AUH', 'BGH', 'LUH', 'RLH', 'Other')) %>%
mutate(site = factor(site, levels = c('AUH', 'BGH', 'LUH', 'RLH', 'Other'))) %>%
filter(site == 'AUH') %>%
nrows()
cons %>%
mutate(site = 'Other') %>%
mutate(site = if_else(str_detect(waitingArea, 'AUH') == TRUE, 'AUH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'BGH') == TRUE, 'BGH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'RLH') == TRUE, 'RLH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'LUH') == TRUE, 'LUH', site)) %>%
subset(site %in% c('AUH', 'BGH', 'LUH', 'RLH', 'Other')) %>%
mutate(site = factor(site, levels = c('AUH', 'BGH', 'LUH', 'RLH', 'Other'))) %>%
filter(site == 'AUH') %>%
nrow()
cons %>%
mutate(site = 'Other') %>%
mutate(site = if_else(str_detect(waitingArea, 'AUH') == TRUE, 'AUH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'BGH') == TRUE, 'BGH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'RLH') == TRUE, 'RLH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'LUH') == TRUE, 'LUH', site)) %>%
subset(site %in% c('AUH', 'BGH', 'LUH', 'RLH', 'Other')) %>%
mutate(site = factor(site, levels = c('AUH', 'BGH', 'LUH', 'RLH', 'Other'))) %>%
filter(site == 'BGH') %>%
nrow()
cons %>%
mutate(site = 'Other') %>%
mutate(site = if_else(str_detect(waitingArea, 'AUH') == TRUE, 'AUH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'BGH') == TRUE, 'BGH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'RLH') == TRUE, 'RLH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'LUH') == TRUE, 'LUH', site)) %>%
subset(site %in% c('AUH', 'BGH', 'LUH', 'RLH', 'Other')) %>%
mutate(site = factor(site, levels = c('AUH', 'BGH', 'LUH', 'RLH', 'Other'))) %>%
filter(site == 'LUH') %>%
nrow()
cons %>%
mutate(site = 'Other') %>%
mutate(site = if_else(str_detect(waitingArea, 'AUH') == TRUE, 'AUH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'BGH') == TRUE, 'BGH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'RLH') == TRUE, 'RLH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'LUH') == TRUE, 'LUH', site)) %>%
subset(site %in% c('AUH', 'BGH', 'LUH', 'RLH', 'Other')) %>%
mutate(site = factor(site, levels = c('AUH', 'BGH', 'LUH', 'RLH', 'Other'))) %>%
filter(site == 'RLH') %>%
nrow()
cons %>%
mutate(site = 'Other') %>%
mutate(site = if_else(str_detect(waitingArea, 'AUH') == TRUE, 'AUH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'BGH') == TRUE, 'BGH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'RLH') == TRUE, 'RLH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'LUH') == TRUE, 'LUH', site)) %>%
subset(site %in% c('AUH', 'BGH', 'LUH', 'RLH', 'Other')) %>%
mutate(site = factor(site, levels = c('AUH', 'BGH', 'LUH', 'RLH', 'Other'))) %>%
filter(site == 'Other') %>%
nrow()
cons %>%
mutate(site = 'Other') %>%
mutate(site = if_else(str_detect(waitingArea, 'AUH') == TRUE, 'AUH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'BGH') == TRUE, 'BGH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'RLH') == TRUE, 'RLH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'LUH') == TRUE, 'LUH', site)) %>%
subset(site %in% c('AUH', 'BGH', 'LUH', 'RLH', 'Other')) %>%
mutate(site = factor(site, levels = c('AUH', 'BGH', 'LUH', 'RLH', 'Other'))) %>%
filter(site == 'Other') %>%
filter(year == 2020)
cons %>%
mutate(site = 'Other') %>%
mutate(site = if_else(str_detect(waitingArea, 'AUH') == TRUE, 'AUH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'BGH') == TRUE, 'BGH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'RLH') == TRUE, 'RLH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'LUH') == TRUE, 'LUH', site)) %>%
subset(site %in% c('AUH', 'BGH', 'LUH', 'RLH', 'Other')) %>%
mutate(site = factor(site, levels = c('AUH', 'BGH', 'LUH', 'RLH', 'Other'))) %>%
filter(site == 'Other') %>%
filter(year == 2020) %>%
nrow()
cons %>%
mutate(site = 'Other') %>%
mutate(site = if_else(str_detect(waitingArea, 'AUH') == TRUE, 'AUH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'BGH') == TRUE, 'BGH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'RLH') == TRUE, 'RLH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'LUH') == TRUE, 'LUH', site)) %>%
subset(site %in% c('AUH', 'BGH', 'LUH', 'RLH', 'Other')) %>%
mutate(site = factor(site, levels = c('AUH', 'BGH', 'LUH', 'RLH', 'Other'))) %>%
filter(site == 'Other') %>%
filter(year == 2021) %>%
nrow()
cons %>%
mutate(site = 'Other') %>%
mutate(site = if_else(str_detect(waitingArea, 'AUH') == TRUE, 'AUH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'BGH') == TRUE, 'BGH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'RLH') == TRUE, 'RLH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'LUH') == TRUE, 'LUH', site)) %>%
subset(site %in% c('AUH', 'BGH', 'LUH', 'RLH', 'Other')) %>%
mutate(site = factor(site, levels = c('AUH', 'BGH', 'LUH', 'RLH', 'Other'))) %>%
filter(site == 'Other') %>%
filter(year == 2022) %>%
nrow()
cons %>%
mutate(site = 'Other') %>%
mutate(site = if_else(str_detect(waitingArea, 'AUH') == TRUE, 'AUH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'BGH') == TRUE, 'BGH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'RLH') == TRUE, 'RLH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'LUH') == TRUE, 'LUH', site)) %>%
subset(site %in% c('AUH', 'BGH', 'LUH', 'RLH', 'Other')) %>%
mutate(site = factor(site, levels = c('AUH', 'BGH', 'LUH', 'RLH', 'Other'))) %>%
filter(site == 'AUH') %>%
filter(year == 2022) %>%
nrow()
cons %>%
mutate(site = 'Other') %>%
mutate(site = if_else(str_detect(waitingArea, 'AUH') == TRUE, 'AUH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'BGH') == TRUE, 'BGH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'RLH') == TRUE, 'RLH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'LUH') == TRUE, 'LUH', site)) %>%
subset(site %in% c('AUH', 'BGH', 'LUH', 'RLH', 'Other')) %>%
mutate(site = factor(site, levels = c('AUH', 'BGH', 'LUH', 'RLH', 'Other'))) %>%
filter(site == 'AUH') %>%
filter(year == 2021) %>%
nrow()
cons %>%
mutate(site = 'Other') %>%
mutate(site = if_else(str_detect(waitingArea, 'AUH') == TRUE, 'AUH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'BGH') == TRUE, 'BGH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'RLH') == TRUE, 'RLH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'LUH') == TRUE, 'LUH', site)) %>%
subset(site %in% c('AUH', 'BGH', 'LUH', 'RLH', 'Other')) %>%
mutate(site = factor(site, levels = c('AUH', 'BGH', 'LUH', 'RLH', 'Other'))) %>%
filter(site == 'AUH') %>%
filter(year == 2020) %>%
nrow()
cons %>%
mutate(site = 'Other') %>%
mutate(site = if_else(str_detect(waitingArea, 'AUH') == TRUE, 'AUH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'BGH') == TRUE, 'BGH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'RLH') == TRUE, 'RLH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'LUH') == TRUE, 'LUH', site)) %>%
subset(site %in% c('AUH', 'BGH', 'LUH', 'RLH', 'Other')) %>%
mutate(site = factor(site, levels = c('AUH', 'BGH', 'LUH', 'RLH', 'Other'))) %>%
filter(site == 'BGH') %>%
filter(year == 2020) %>%
nrow()
cons %>%
mutate(site = 'Other') %>%
mutate(site = if_else(str_detect(waitingArea, 'AUH') == TRUE, 'AUH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'BGH') == TRUE, 'BGH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'RLH') == TRUE, 'RLH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'LUH') == TRUE, 'LUH', site)) %>%
subset(site %in% c('AUH', 'BGH', 'LUH', 'RLH', 'Other')) %>%
mutate(site = factor(site, levels = c('AUH', 'BGH', 'LUH', 'RLH', 'Other'))) %>%
filter(site == 'BGH') %>%
filter(year == 2021) %>%
nrow()
cons %>%
mutate(site = 'Other') %>%
mutate(site = if_else(str_detect(waitingArea, 'AUH') == TRUE, 'AUH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'BGH') == TRUE, 'BGH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'RLH') == TRUE, 'RLH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'LUH') == TRUE, 'LUH', site)) %>%
subset(site %in% c('AUH', 'BGH', 'LUH', 'RLH', 'Other')) %>%
mutate(site = factor(site, levels = c('AUH', 'BGH', 'LUH', 'RLH', 'Other'))) %>%
filter(site == 'BGH') %>%
filter(year == 2022) %>%
nrow()
cons %>%
mutate(site = 'Other') %>%
mutate(site = if_else(str_detect(waitingArea, 'AUH') == TRUE, 'AUH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'BGH') == TRUE, 'BGH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'RLH') == TRUE, 'RLH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'LUH') == TRUE, 'LUH', site)) %>%
subset(site %in% c('AUH', 'BGH', 'LUH', 'RLH', 'Other')) %>%
mutate(site = factor(site, levels = c('AUH', 'BGH', 'LUH', 'RLH', 'Other'))) %>%
filter(site == 'LUH') %>%
filter(year == 2022) %>%
nrow()
cons %>%
mutate(site = 'Other') %>%
mutate(site = if_else(str_detect(waitingArea, 'AUH') == TRUE, 'AUH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'BGH') == TRUE, 'BGH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'RLH') == TRUE, 'RLH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'LUH') == TRUE, 'LUH', site)) %>%
subset(site %in% c('AUH', 'BGH', 'LUH', 'RLH', 'Other')) %>%
mutate(site = factor(site, levels = c('AUH', 'BGH', 'LUH', 'RLH', 'Other'))) %>%
filter(site == 'LUH') %>%
filter(year == 2021) %>%
nrow()
cons %>%
mutate(site = 'Other') %>%
mutate(site = if_else(str_detect(waitingArea, 'AUH') == TRUE, 'AUH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'BGH') == TRUE, 'BGH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'RLH') == TRUE, 'RLH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'LUH') == TRUE, 'LUH', site)) %>%
subset(site %in% c('AUH', 'BGH', 'LUH', 'RLH', 'Other')) %>%
mutate(site = factor(site, levels = c('AUH', 'BGH', 'LUH', 'RLH', 'Other'))) %>%
filter(site == 'LUH') %>%
filter(year == 2020) %>%
nrow()
cons %>%
mutate(site = 'Other') %>%
mutate(site = if_else(str_detect(waitingArea, 'AUH') == TRUE, 'AUH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'BGH') == TRUE, 'BGH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'RLH') == TRUE, 'RLH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'LUH') == TRUE, 'LUH', site)) %>%
subset(site %in% c('AUH', 'BGH', 'LUH', 'RLH', 'Other')) %>%
mutate(site = factor(site, levels = c('AUH', 'BGH', 'LUH', 'RLH', 'Other'))) %>%
filter(site == 'RLH') %>%
filter(year == 2020) %>%
nrow()
cons %>%
mutate(site = 'Other') %>%
mutate(site = if_else(str_detect(waitingArea, 'AUH') == TRUE, 'AUH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'BGH') == TRUE, 'BGH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'RLH') == TRUE, 'RLH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'LUH') == TRUE, 'LUH', site)) %>%
subset(site %in% c('AUH', 'BGH', 'LUH', 'RLH', 'Other')) %>%
mutate(site = factor(site, levels = c('AUH', 'BGH', 'LUH', 'RLH', 'Other'))) %>%
filter(site == 'RLH') %>%
filter(year == 2021) %>%
nrow()
cons %>%
mutate(site = 'Other') %>%
mutate(site = if_else(str_detect(waitingArea, 'AUH') == TRUE, 'AUH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'BGH') == TRUE, 'BGH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'RLH') == TRUE, 'RLH', site)) %>%
mutate(site = if_else(str_detect(waitingArea, 'LUH') == TRUE, 'LUH', site)) %>%
subset(site %in% c('AUH', 'BGH', 'LUH', 'RLH', 'Other')) %>%
mutate(site = factor(site, levels = c('AUH', 'BGH', 'LUH', 'RLH', 'Other'))) %>%
filter(site == 'RLH') %>%
filter(year == 2022) %>%
nrow()
cons %>%
mutate(Speciality = str_split_fixed(cons$waitingArea, '/', 2)
cons %>%
mutate(Speciality = str_split_fixed(cons$waitingArea, '/', 2))
cons2 %>%
mutate(Speciality = str_split_fixed(cons$waitingArea, '/', 2))
cons2 %>%
mutate(Speciality = str_split_fixed(cons$waitingArea, '/', 2)) %>%
table(cons2$Speciality)
table(cons2$Speciality)
cons2 %>%
mutate(Speciality = str_split_fixed(cons$waitingArea, '/', 2)) %>%
ggplot(aes(x=as.Date(`Date`))) +
geom_line(aes(fill=..count..), stat="bin", binwidth = 7) +
scale_x_date(date_breaks = "months", date_labels = "%b") +
geom_vline(xintercept = as.numeric(as.Date(c("2021-01-01", "2022-01-01"))), linetype=4) +
theme(axis.text.x = element_text(size=8, angle=45))
cons2 %>%
mutate(Speciality = str_split_fixed(cons$waitingArea, '/', 2)) %>%
ggplot(aes(x=as.Date(`Date`)), group=Speciality) +
geom_line(aes(fill=..count..), stat="bin", binwidth = 7) +
scale_x_date(date_breaks = "months", date_labels = "%b") +
geom_vline(xintercept = as.numeric(as.Date(c("2021-01-01", "2022-01-01"))), linetype=4) +
theme(axis.text.x = element_text(size=8, angle=45))
cons2 %>%
mutate(Speciality = str_split_fixed(cons$waitingArea, '/', 2)) %>%
ggplot(aes(x=as.Date(`Date`)), group=Speciality, color = Speciality) +
geom_line(aes(fill=..count..), stat="bin", binwidth = 7) +
scale_x_date(date_breaks = "months", date_labels = "%b") +
geom_vline(xintercept = as.numeric(as.Date(c("2021-01-01", "2022-01-01"))), linetype=4) +
theme(axis.text.x = element_text(size=8, angle=45))
cons2 %>%
mutate(Speciality = str_split_fixed(cons$waitingArea, '/', 2)) %>%
ggplot(aes(x=as.Date(`Date`))) +
geom_line(aes(fill=..count..), stat="bin", binwidth = 7, group=Speciality, color = Speciality) +
scale_x_date(date_breaks = "months", date_labels = "%b") +
geom_vline(xintercept = as.numeric(as.Date(c("2021-01-01", "2022-01-01"))), linetype=4) +
theme(axis.text.x = element_text(size=8, angle=45))
cons2 %>%
mutate(Speciality = str_split_fixed(cons$waitingArea, '/', 2)) %>%
ggplot(aes(x=as.Date(`Date`))) +
geom_line(aes(fill=..count..), stat="bin", binwidth = 7, color = Speciality) +
scale_x_date(date_breaks = "months", date_labels = "%b") +
geom_vline(xintercept = as.numeric(as.Date(c("2021-01-01", "2022-01-01"))), linetype=4) +
theme(axis.text.x = element_text(size=8, angle=45))
cons2 %>%
mutate(Speciality = str_split_fixed(cons$waitingArea, '/', 2)) %>%
ggplot(aes(x=as.Date(`Date`)), color = Speciality) +
geom_line(aes(fill=..count..), stat="bin", binwidth = 7) +
scale_x_date(date_breaks = "months", date_labels = "%b") +
geom_vline(xintercept = as.numeric(as.Date(c("2021-01-01", "2022-01-01"))), linetype=4) +
theme(axis.text.x = element_text(size=8, angle=45))
cons2 %>%
mutate(Speciality = str_split_fixed(cons$waitingArea, '/', 2)) %>%
ggplot(aes(x=as.Date(`Date`))) +
geom_line(aes(fill=..count..), stat="bin", binwidth = 7) +
scale_x_date(date_breaks = "months", date_labels = "%b") +
geom_vline(xintercept = as.numeric(as.Date(c("2021-01-01", "2022-01-01"))), linetype=4) +
theme(axis.text.x = element_text(size=8, angle=45)) +
facet_wrap(~Speciality)
cons %>%
mutate(Speciality = str_split_fixed(cons$waitingArea, '/', 2)) %>%
ggplot(aes(x=as.Date(`Date`))) +
geom_line(aes(fill=..count..), stat="bin", binwidth = 7) +
scale_x_date(date_breaks = "months", date_labels = "%b") +
geom_vline(xintercept = as.numeric(as.Date(c("2021-01-01", "2022-01-01"))), linetype=4) +
theme(axis.text.x = element_text(size=8, angle=45)) +
facet_wrap(~Speciality)
cons %>%
mutate(Speciality = str_split_fixed(cons$waitingArea, '/', 2)) %>%
ggplot(aes(x=as.Date(`Date`))) +
geom_line(aes(fill=..count..), stat="bin", binwidth = 7) +
table(cons2$Speciality)
str_split_fixed(cons$waitingArea, '/', 2)
str_split_fixed(cons$waitingArea, '/', 2)[2]
str_split_fixed(cons$waitingArea, '/', 2)[,2]
cons %>%
mutate(Speciality = str_split_fixed(cons$waitingArea, '/', 2)[,2]) %>%
ggplot(aes(x=as.Date(`Date`))) +
geom_line(aes(fill=..count..), stat="bin", binwidth = 7)
cons %>%
mutate(Speciality = str_split_fixed(cons$waitingArea, '/', 2)[,2]) %>%
ggplot(aes(x=as.Date(`Date`)), group_by(Speciality)) +
geom_line(aes(fill=..count..), stat="bin", binwidth = 7)
cons %>%
mutate(Speciality = str_split_fixed(cons$waitingArea, '/', 2)[,2]) %>%
ggplot(aes(x=as.Date(`Date`)), group = Speciality, color = Speciality) +
geom_line(aes(fill=..count..), stat="bin", binwidth = 7)
cons %>%
mutate(Speciality = str_split_fixed(cons$waitingArea, '/', 2)[,2]) %>%
ggplot(aes(x=as.Date(`Date`)), group = Speciality, color = Speciality) +
geom_line()
cons %>%
mutate(Speciality = str_split_fixed(cons$waitingArea, '/', 2)[,2]) %>%
ggplot(aes(x=as.Date(`Date`)), group = Speciality, color = Speciality) +
geom_line()
cons %>%
mutate(Speciality = str_split_fixed(cons$waitingArea, '/', 2)[,2]) %>%
ggplot(aes(x=as.Date(`Date`)), group = Speciality, color = Speciality) +
geom_line(aes(fill=..count..), stat="bin", binwidth = 7, color = Speciality)
cons %>%
mutate(Speciality = str_split_fixed(cons$waitingArea, '/', 2)[,2]) %>%
ggplot(aes(x=as.Date(`Date`))) +
geom_histogram(aes(fill=..count..), stat="bin", binwidth = 7, color = Speciality)
cons %>%
mutate(Speciality = str_split_fixed(cons$waitingArea, '/', 2)[,2]) %>%
ggplot(aes(x=as.Date(`Date`))) +
geom_histogram(aes(fill=..count..), stat="bin", binwidth = 7)
cons %>%
mutate(Speciality = str_split_fixed(cons$waitingArea, '/', 2)[,2]) %>%
ggplot(aes(x=as.Date(`Date`)), color = Speciality) +
geom_histogram(aes(fill=..count..), stat="bin", binwidth = 7)
ggplot(aes(x=as.Date(`Date`)), group_by(Speciality) +
cons %>%
mutate(Speciality = str_split_fixed(cons$waitingArea, '/', 2)[,2]) %>%
ggplot(aes(x=as.Date(`Date`)), group_by(Speciality)) +
geom_histogram(aes(fill=..count..), stat="bin", binwidth = 7)
# plot age group satisfaction
ggplot(data = df, aes(x = overallRating, fill = ageGroup)) +
geom_bar(position = 'dodge') +
theme(axis.text.x = element_text(angle = 45, vjust = 0.5)) +
ggtitle("Global Patient satisfaction to accessing video appointments") +
xlab("Satisfaction") + ylab("count")
df = read_csv('rawData/raw_data.csv')
df = df%>%
rename(patId = "Respondent ID") %>%
rename(colId = "Collector ID") %>%
rename(start = "Start Date") %>%
rename(end = "End Date") %>%
rename(ageGroup = "What age group do you belong?") %>%
rename(accessRating = "Please rate the ease of use for accessing the Video Consultation today?") %>%
rename(overallRating = "Please rate your overall experience of the Video Consultation today?") %>%
rename(reUse = "Would you be happy to use the Video Consultation again?") %>%
rename(comments = "Please provide us with any additional comments/ suggestions.") %>%
rename(department = "Waiting Area") %>%
mutate(accessRating.coded = as.numeric(NA))%>%
mutate(accessRating.coded = if_else(accessRating == 'Very Dissatisfied', 0, accessRating.coded)) %>%
mutate(accessRating.coded = if_else(accessRating == 'Dissatisfied', 1, accessRating.coded )) %>%
mutate(accessRating.coded = if_else(accessRating == 'Neither Satisfied nor Dissatisfied', 2, accessRating.coded )) %>%
mutate(accessRating.coded = if_else(accessRating == 'Satisfied', 3, accessRating.coded )) %>%
mutate(accessRating.coded = if_else(accessRating == 'Very Satisfied', 4, accessRating.coded)) %>%
mutate(overallRating.coded = as.numeric(NA)) %>%
mutate(overallRating.coded = if_else(overallRating == 'Very Dissatisfied', 0, overallRating.coded )) %>%
mutate(overallRating.coded = if_else(overallRating == 'Dissatisfied', 1, overallRating.coded )) %>%
mutate(overallRating.coded = if_else(overallRating == 'Neither Satisfied nor Dissatisfied', 2, overallRating.coded )) %>%
mutate(overallRating.coded = if_else(overallRating == 'Satisfied', 3, overallRating.coded )) %>%
mutate(overallRating.coded = if_else(overallRating == 'Very Satisfied', 4, overallRating.coded)) %>%
mutate(Site = 'Other') %>%
mutate(Site = if_else(str_detect(department, 'RLH') == TRUE, 'RLH', Site)) %>%
mutate(Site = if_else(str_detect(department,'AUH') == TRUE, 'AUH', Site)) %>%
mutate(Site = if_else(str_detect(department,'LUH') == TRUE, 'LUH', Site)) %>%
mutate(Site = if_else(str_detect(department,'BGH') == TRUE, 'BGH', Site)) %>%
# mutate(Site = factor(Site, levels = c('RLH', 'BGH', AUH', 'LUH', 'Other'))) %>%
select(patId:accessRating, accessRating.coded, overallRating, overallRating.coded, everything())
#replace strings
df$accessRating = str_replace(df$accessRating, 'Neither Satisfied nor Dissatisfied', 'Neutral')
df$overallRating = str_replace(df$overallRating, 'Neither Satisfied nor Dissatisfied', 'Neutral')
df = df%>%
mutate(accessRating = factor(accessRating, levels = c('Very Dissatisfied', 'Dissatisfied', 'Neutral', 'Satisfied', 'Very Satisfied'))) %>%
mutate(overallRating = factor(overallRating, levels = c('Very Dissatisfied', 'Dissatisfied', 'Neutral', 'Satisfied', 'Very Satisfied'))) %>%
mutate(ageGroup = factor(ageGroup, c('16 - 25', '26 - 35', '36 - 45', '46 - 65', '65+')))
nrow(df)
table(df$Site)
sum(table(df$Site))
# satisfaction by age group percent
df %>%
ggplot(aes(x= accessRating,  group=ageGroup)) +
geom_bar(aes(y = ..prop.., fill = factor(..x..)), stat="count") +
geom_text(aes(label = scales::percent(..prop.., accuracy = 0.1),
y= ..prop.. ), stat= "count", vjust = -.5, size = 2) +
labs(y = "Percent", fill="Satisfaction") +
facet_grid(~ageGroup) +
scale_y_continuous(labels = scales::percent) +
scale_fill_discrete(labels = levels(df$accessRating)) +
theme(axis.text.x = element_blank(), axis.ticks.x = element_blank()) +
ggtitle("Patient satisfaction\nAccessing patient appointments across different age groups")
# segregate per department - filtered with departments with > 100 samples
x = as.data.frame(table(df$department)) %>%
filter(Freq > 100)
df %>%
filter(department %in% x$Var1) %>%
ggplot(aes(x= accessRating,  group=department)) +
geom_bar(aes(y = ..prop.., fill = factor(..x..)), stat="count") +
geom_text(aes( label = scales::percent(..prop.., accuracy = 0.1),
y= ..prop.. ), stat= "count", vjust = -.5, size = 2) +
labs(y = "Percent", fill = 'accessRating') +
facet_wrap(~department) +
scale_y_continuous(labels = scales::percent) +
coord_cartesian(ylim = c(0, 0.85)) +
scale_fill_discrete(name = "Access Rating",
labels = c("Very Dissatisified", "Dissatisfied", "Neutral",
"Satisified", "Very Satisfied")) +
theme(axis.text.x=element_blank(), axis.ticks.x=element_blank(),
strip.text = element_text(size = 5))
# segregate by month
df %>%
mutate(month = month(start, label = TRUE)) %>%
mutate(year = year(start)) %>%
mutate(month = factor(month, levels = c('Apr', 'May', 'Jun', 'Jul', 'Aug',
'Sep', 'Oct', 'Nov', 'Dec', 'Jan',
'Feb', 'Mar'))) %>%
group_by(month) %>%
ggplot(aes(x = accessRating, fill = ageGroup)) +
geom_bar(position = 'dodge') +
facet_wrap(~ month) +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5)) +
ggtitle("Patient satisfaction to accessing video appointments per month") +
xlab("Satisfaction") + ylab("count")
cons %>%
mutate(Speciality = str_split_fixed(cons$waitingArea, '/', 2)[,2]) %>%
ggplot(aes(x=as.Date(`Date`), fill = Speciality)) +
geom_bar(aes(fill=..count..), stat="bin", binwidth = 7)
str_split_fixed(cons$waitingArea, '/', 2)[,2])
str_split_fixed(cons$waitingArea, '/', 2)[,2]
